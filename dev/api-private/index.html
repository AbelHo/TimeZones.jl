<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API – Private · TimeZones.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>TimeZones.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Introduction</a></li><li><a class="toctext" href="../types/">Types</a></li><li><a class="toctext" href="../conversions/">Converting</a></li><li><a class="toctext" href="../arithmetic/">Arithmetic</a></li><li><a class="toctext" href="../rounding/">Rounding</a></li><li><a class="toctext" href="../current/">Current Time</a></li><li><a class="toctext" href="../faq/">Frequently Asked Questions</a></li><li><a class="toctext" href="../api-public/">API – Public</a></li><li class="current"><a class="toctext" href>API – Private</a><ul class="internal"><li><a class="toctext" href="#TZData-1">TZData</a></li><li><a class="toctext" href="#Interpretation-1">Interpretation</a></li><li><a class="toctext" href="#Etc.-1">Etc.</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>API – Private</a></li></ul><a class="edit-page" href="https://github.com/JuliaTime/TimeZones.jl/blob/master/docs/src/api-private.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>API – Private</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="TimeZones-Internal-API-1" href="#TimeZones-Internal-API-1">TimeZones Internal API</a></h1><h2><a class="nav-anchor" id="TZData-1" href="#TZData-1">TZData</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.TZData.tzdata_url" href="#TimeZones.TZData.tzdata_url"><code>TimeZones.TZData.tzdata_url</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">tzdata_url(version=&quot;latest&quot;) -&gt; AbstractString</code></pre><p>Generates a HTTPS URL for the specified tzdata version. Typical version strings are formatted as 4-digit year followed by a lowercase ASCII letter. Available versions start with &quot;tzdata&quot; and are listed on &quot;https://data.iana.org/time-zones/releases/&quot; or &quot;ftp://ftp.iana.org/tz/releases/&quot;.</p><p><strong>Examples</strong></p><pre><code class="language-julia">julia&gt; tzdata_url(&quot;2017a&quot;)
&quot;https://data.iana.org/time-zones/releases/tzdata2017a.tar.gz&quot;</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/tzdata/download.jl#L81-L94">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.TZData.tzdata_download" href="#TimeZones.TZData.tzdata_download"><code>TimeZones.TZData.tzdata_download</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">tzdata_download(version=&quot;latest&quot;, dir=tempdir()) -&gt; AbstractString</code></pre><p>Downloads a tzdata archive from IANA using the specified <code>version</code> to the specified directory. See <code>tzdata_url</code> for details on tzdata version strings.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/tzdata/download.jl#L105-L110">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.TZData.isarchive" href="#TimeZones.TZData.isarchive"><code>TimeZones.TZData.isarchive</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">isarchive(path) -&gt; Bool</code></pre><p>Determines if the given <code>path</code> is an archive.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/tzdata/archive.jl#L22-L26">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.TZData.readarchive" href="#TimeZones.TZData.readarchive"><code>TimeZones.TZData.readarchive</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">readarchive(archive) -&gt; Vector{AbstractString}</code></pre><p>Returns the file names contained in the <code>archive</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/tzdata/archive.jl#L35-L39">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.TZData.extract" href="#TimeZones.TZData.extract"><code>TimeZones.TZData.extract</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">extract(archive, directory, [files]; [verbose=false]) -&gt; Nothing</code></pre><p>Extracts files from a compressed tar <code>archive</code> to the specified <code>directory</code>. If <code>files</code> is specified only the files given will be extracted. The <code>verbose</code> flag can be used to display additional information to STDOUT.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/tzdata/archive.jl#L1-L7">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.TZData.tzdata_version_dir" href="#TimeZones.TZData.tzdata_version_dir"><code>TimeZones.TZData.tzdata_version_dir</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">tzdata_version_dir(dir::AbstractString) -&gt; AbstractString</code></pre><p>Determines the tzdata version by inspecting various files in a directory.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/tzdata/version.jl#L63-L67">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.TZData.tzdata_version_archive" href="#TimeZones.TZData.tzdata_version_archive"><code>TimeZones.TZData.tzdata_version_archive</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">tzdata_version_archive(archive::AbstractString) -&gt; AbstractString</code></pre><p>Determines the tzdata version by inspecting the contents within the archive. Useful when downloading the latest archive &quot;tzdata-latest.tar.gz&quot;.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/tzdata/version.jl#L81-L86">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.TZData.read_news" href="#TimeZones.TZData.read_news"><code>TimeZones.TZData.read_news</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">read_news(news, [limit]) -&gt; Vector{AbstractString}</code></pre><p>Reads all of the tzdata versions from the NEWS file in the order in which they appear. Note that since the NEWS file is in reverse chronological order the versions will also be in that order. Useful for identifying the version of the tzdata.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/tzdata/version.jl#L35-L41">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.TZData.compile!" href="#TimeZones.TZData.compile!"><code>TimeZones.TZData.compile!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Resolves a named zone into TimeZone. Updates ordered with any new rules that were required to be ordered.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/tzdata/compile.jl#L425-L428">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.TZData.tryparse_dayofmonth_function" href="#TimeZones.TZData.tryparse_dayofmonth_function"><code>TimeZones.TZData.tryparse_dayofmonth_function</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">tryparse_dayofmonth_function(str::AbstractString) -&gt; Union{Function,Nothing}</code></pre><p>Parse the various day-of-month formats used within tzdata source files. Returns a function which generates a <code>Date</code> observing the rule. The function returned (<code>f</code>) can be called by providing a year and month arguments or a <code>Date</code> (e.g. <code>f(year, month)</code> or <code>f(::Date)</code>).</p><pre><code class="language-julia">julia&gt; f = tryparse_dayofmonth_function(&quot;lastSun&quot;)
last_sunday_of_month (generic function with 1 method)

julia&gt; f(2019, 3)
2019-03-31

julia&gt; f = tryparse_dayofmonth_function(&quot;Sun&gt;=8&quot;)
#16 (generic function with 1 method)

julia&gt; f(2019, 3)
2019-03-10

julia&gt; f = tryparse_dayofmonth_function(&quot;Fri&lt;=1&quot;)
#16 (generic function with 1 method)

julia&gt; f(2019, 4)
2019-03-29

julia&gt; f = tryparse_dayofmonth_function(&quot;15&quot;)
#18 (generic function with 1 method)

julia&gt; f(2019, 3)
2019-03-15</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/tzdata/compile.jl#L135-L167">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.TZData.order_rules" href="#TimeZones.TZData.order_rules"><code>TimeZones.TZData.order_rules</code></a> — <span class="docstring-category">Function</span>.</div><div><div><p>Rules are typically ordered by the &quot;from&quot; than &quot;in&quot; fields. Since rules also contain a &quot;to&quot; field the written ordering can be problematic for resolving time zone transitions.</p><p>Example:</p><pre><code class="language-none"># Rule  NAME    FROM    TO  TYPE    IN  ON  AT      SAVE    LETTER/S
Rule    Poland  1918    1919    -   Sep 16  2:00s   0       -
Rule    Poland  1919    only    -   Apr 15  2:00s   1:00    S
Rule    Poland  1944    only    -   Apr  3  2:00s   1:00    S

A simplistic way of iterating through the rules by years could yield the rules
in the wrong order:

# ON         AT      SAVE    LETTER/S
1918-09-16   2:00s   0       -
1919-09-16   2:00s   0       -
1919-04-15   2:00s   1:00    S
1944-04-03   2:00s   1:00    S

The order_rules function will expand the rules such that they can be ordered by the
&quot;on&quot; date which ensures we process the rules in the correct order:

1918-09-16   2:00s   0       -
1919-04-15   2:00s   1:00    S
1919-09-16   2:00s   0       -
1944-04-03   2:00s   1:00    S</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/tzdata/compile.jl#L353-L381">source</a></section><h2><a class="nav-anchor" id="Interpretation-1" href="#Interpretation-1">Interpretation</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.transition_range" href="#TimeZones.transition_range"><code>TimeZones.transition_range</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">transition_range(dt::DateTime, tz::VariableTimeZone, context::Type{Union{Local,UTC}}) -&gt; UnitRange</code></pre><p>Finds the indexes of the <code>tz</code> transitions which may be applicable for the <code>dt</code>. The given DateTime is expected to be local to the time zone or in UTC as specified by <code>context</code>. Note that UTC context will always return a range of length one.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/interpret.jl#L57-L63">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.interpret" href="#TimeZones.interpret"><code>TimeZones.interpret</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">interpret(dt::DateTime, tz::VariableTimeZone, context::Type{Union{Local,UTC}}) -&gt; Array{ZonedDateTime}</code></pre><p>Produces a list of possible <code>ZonedDateTime</code>s given a <code>DateTime</code> and <code>VariableTimeZone</code>. The result will be returned in chronological order. Note that <code>DateTime</code>s in the local context typically return 0-2 results while the UTC context will always return 1 result.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/interpret.jl#L83-L89">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.shift_gap" href="#TimeZones.shift_gap"><code>TimeZones.shift_gap</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">shift_gap(local_dt::DateTime, tz::VariableTimeZone) -&gt; Tuple</code></pre><p>Given a non-existent local <code>DateTime</code> in a <code>TimeZone</code> produces a tuple containing two valid <code>ZonedDateTime</code>s that span the gap. Providing a valid local <code>DateTime</code> returns an empty tuple. Note that this function does not support passing in a UTC <code>DateTime</code> since there are no non-existent UTC <code>DateTime</code>s.</p><p>Aside: the function name refers to a period of invalid local time (gap) caused by daylight saving time or offset changes (shift).</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/interpret.jl#L92-L102">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.first_valid" href="#TimeZones.first_valid"><code>TimeZones.first_valid</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">first_valid(local_dt::DateTime, tz::VariableTimeZone, step::Period)</code></pre><p>Construct a valid <code>ZonedDateTime</code> by adjusting the local <code>DateTime</code>. If the local <code>DateTime</code> is non-existent then it will be adjusted using the <code>step</code> to be <em>after</em> the gap. When the local <code>DateTime</code> is ambiguous the <em>first</em> ambiguous <code>DateTime</code> will be returned.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/interpret.jl#L119-L125">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.last_valid" href="#TimeZones.last_valid"><code>TimeZones.last_valid</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">last_valid(local_dt::DateTime, tz::VariableTimeZone, step::Period)</code></pre><p>Construct a valid <code>ZonedDateTime</code> by adjusting the local <code>DateTime</code>. If the local <code>DateTime</code> is non-existent then it will be adjusted using the <code>step</code> to be <em>before</em> the gap. When the local <code>DateTime</code> is ambiguous the <em>last</em> ambiguous <code>DateTime</code> will be returned.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/interpret.jl#L138-L144">source</a></section><h2><a class="nav-anchor" id="Etc.-1" href="#Etc.-1">Etc.</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.UTCOffset" href="#TimeZones.UTCOffset"><code>TimeZones.UTCOffset</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">UTCOffset</code></pre><p>A <code>UTCOffset</code> is an amount of time subtracted from or added to UTC to get the current local time – whether it&#39;s standard time or daylight saving time.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/utcoffset.jl#L5-L10">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.@optional" href="#TimeZones.@optional"><code>TimeZones.@optional</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-julia">@optional(expr)</code></pre><p>Creates multiple method signatures to allow optional arguments before required arguments. For example:</p><pre><code class="language-none">f(a=1, b=2, c) = ...</code></pre><p>becomes:</p><pre><code class="language-none">f(a, b, c) = ...
f(a, c) = f(a, 2, c)
f(c) = f(1, 2, c)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/utils.jl#L1-L14">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.read_tzfile" href="#TimeZones.read_tzfile"><code>TimeZones.read_tzfile</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">read_tzfile(io::IO, name::AbstractString) -&gt; TimeZone</code></pre><p>Read the content of an I/O stream and process it as a <a href="https://man7.org/linux/man-pages/man5/tzfile.5.html">POSIX tzfile</a>. The returned <code>TimeZone</code> will be given the supplied name <code>name</code> unless a <code>FixedTimeZone</code> is returned.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/tzfile.jl#L17-L23">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.parse_tz_format" href="#TimeZones.parse_tz_format"><code>TimeZones.parse_tz_format</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">parse_tz_format(str) -&gt; TimeZone</code></pre><p>Parse the time zone format typically provided via the &quot;TZ&quot; environment variable. Details on the format can be found under the man page for <a href="https://man7.org/linux/man-pages/man3/tzset.3.html">tzset</a>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/local.jl#L173-L179">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="TimeZones.tryparse_tz_format" href="#TimeZones.tryparse_tz_format"><code>TimeZones.tryparse_tz_format</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">tryparse_tz_format(str) -&gt; Union{TimeZone, Nothing}</code></pre><p>Like <code>parse_tz_format</code>, but returns either a value of the <code>TimeZone</code>, or <code>nothing</code> if the string does not contain a valid format.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/local.jl#L190-L195">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Base.hash-Tuple{ZonedDateTime,UInt64}" href="#Base.hash-Tuple{ZonedDateTime,UInt64}"><code>Base.hash</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">hash(::ZonedDateTime, h)</code></pre><p>Compute an integer hash code for a ZonedDateTime by hashing the <code>utc_datetime</code> field. <code>hash(:utc_instant, h)</code> is used to avoid collisions with <code>DateTime</code> hashes.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/types/zoneddatetime.jl#L172-L177">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Dates.guess-Tuple{ZonedDateTime,ZonedDateTime,Any}" href="#Dates.guess-Tuple{ZonedDateTime,ZonedDateTime,Any}"><code>Dates.guess</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">guess(start::ZonedDateTime, finish::ZonedDateTime, step) -&gt; Integer</code></pre><p>Given a start and end date, indicates how many steps/periods are between them. Defining this function allows <code>StepRange</code>s to be defined for <code>ZonedDateTime</code>s.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaTime/TimeZones.jl/blob/f07796f387e3ca2fdedc8b27c74534ba1ae9bfd3/src/ranges.jl#L3-L8">source</a></section><footer><hr/><a class="previous" href="../api-public/"><span class="direction">Previous</span><span class="title">API – Public</span></a></footer></article></body></html>
