<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Rounding · TimeZones.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>TimeZones.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Introduction</a></li><li><a class="toctext" href="../types/">Types</a></li><li><a class="toctext" href="../conversions/">Converting</a></li><li><a class="toctext" href="../arithmetic/">Arithmetic</a></li><li class="current"><a class="toctext" href>Rounding</a><ul class="internal"><li><a class="toctext" href="#Rounding-to-a-TimePeriod-1">Rounding to a TimePeriod</a></li><li><a class="toctext" href="#Rounding-to-a-DatePeriod-1">Rounding to a DatePeriod</a></li><li><a class="toctext" href="#Examples-1">Examples</a></li></ul></li><li><a class="toctext" href="../current/">Current Time</a></li><li><a class="toctext" href="../faq/">Frequently Asked Questions</a></li><li><a class="toctext" href="../api-public/">API – Public</a></li><li><a class="toctext" href="../api-private/">API – Private</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Rounding</a></li></ul><a class="edit-page" href="https://github.com/JuliaTime/TimeZones.jl/blob/master/docs/src/rounding.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Rounding</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Rounding-a-ZonedDateTime-1" href="#Rounding-a-ZonedDateTime-1">Rounding a ZonedDateTime</a></h1><p>Rounding operations (<code>floor</code>, <code>ceil</code>, and <code>round</code>) on <code>ZonedDateTime</code>s are performed in a <a href="https://docs.julialang.org/en/v1/stdlib/Dates/#Rounding-1">similar manner to <code>DateTime</code></a> and should generally behave as expected. When <code>VariableTimeZone</code> transitions are involved, however, unexpected behaviour may be encountered.</p><p>Instead of performing rounding operations on a UTC representation of the <code>ZonedDateTime</code>, which would in some cases be computationally less expensive, rounding is done in the local time zone. This ensures that rounding behaves as expected and is maximally meaningful.</p><p>If rounding were done in UTC, consider how rounding to the nearest day would be resolved for non-UTC time zones: the result would be 00:00 UTC, which wouldn&#39;t be midnight local time. Similarly, when rounding to the nearest hour in <code>Australia/Eucla (UTC+08:45)</code>, the result wouldn&#39;t be on the hour in the local time zone.</p><h2><a class="nav-anchor" id="Rounding-to-a-TimePeriod-1" href="#Rounding-to-a-TimePeriod-1">Rounding to a TimePeriod</a></h2><p>When the target resolution is a <code>TimePeriod</code> the likelihood of encountering an ambiguous or non-existent time (due to daylight saving time transitions) is increased. To resolve this issue, rounding a <code>ZonedDateTime</code> with a <code>VariableTimeZone</code> to a <code>TimePeriod</code> uses the <code>DateTime</code> value in the appropriate <code>FixedTimeZone</code>, then reconverts it to a <code>ZonedDateTime</code> in the appropriate <code>VariableTimeZone</code> afterward. (See <a href="#Examples-1">Examples</a> below.)</p><h2><a class="nav-anchor" id="Rounding-to-a-DatePeriod-1" href="#Rounding-to-a-DatePeriod-1">Rounding to a DatePeriod</a></h2><p>When the target resolution is a <code>DatePeriod</code> rounding is done in the local time zone in a straightforward fashion.</p><p>Rounding is not an entirely &quot;safe&quot; operation for <code>ZonedDateTime</code>s, as in some cases historical transitions for some time zones (<code>Asia/Colombo</code>, for example) occur at midnight. In such cases rounding to a <code>DatePeriod</code> may still result in an <code>AmbiguousTimeError</code> or a <code>NonExistentTimeError</code>s. (But such occurrences should be relatively rare.)</p><p>Regular daylight saving time transitions should be safe.</p><h2><a class="nav-anchor" id="Examples-1" href="#Examples-1">Examples</a></h2><p>The <code>America/Winnipeg</code> time zone transitioned from Central Standard Time (UTC-6:00) to Central Daylight Time (UTC-5:00) on 2016-03-13, moving directly from 01:59:59 to 03:00:00.</p><pre><code class="language-julia-repl">julia&gt; zdt = ZonedDateTime(2016, 3, 13, 1, 45, tz&quot;America/Winnipeg&quot;)
2016-03-13T01:45:00-06:00

julia&gt; floor(zdt, Dates.Day)
2016-03-13T00:00:00-06:00

julia&gt; ceil(zdt, Dates.Day)
2016-03-14T00:00:00-05:00

julia&gt; round(zdt, Dates.Day)
2016-03-13T00:00:00-06:00

julia&gt; floor(zdt, Dates.Hour)
2016-03-13T01:00:00-06:00

julia&gt; ceil(zdt, Dates.Hour)
2016-03-13T03:00:00-05:00

julia&gt; round(zdt, Dates.Hour)
2016-03-13T03:00:00-05:00</code></pre><p>The <code>Asia/Colombo</code> time zone revised the definition of Lanka Time from UTC+6:30 to UTC+6:00 on 1996-10-26, moving from 00:29:59 back to 00:00:00.</p><pre><code class="language-julia-repl">julia&gt; zdt = ZonedDateTime(1996, 10, 25, 23, 45, tz&quot;Asia/Colombo&quot;)
1996-10-25T23:45:00+06:30

julia&gt; round(zdt, Dates.Hour)
1996-10-26T00:00:00+06:30

julia&gt; round(zdt, Dates.Day)
ERROR: AmbiguousTimeError: Local DateTime 1996-10-26T00:00:00 is ambiguous within Asia/Colombo</code></pre><footer><hr/><a class="previous" href="../arithmetic/"><span class="direction">Previous</span><span class="title">Arithmetic</span></a><a class="next" href="../current/"><span class="direction">Next</span><span class="title">Current Time</span></a></footer></article></body></html>
